function qtranxj_get_cookie(e){for(var n=document.cookie.split(";"),t=0;t<n.length;++t){var a=n[t].split("=");if(a[0].trim()==e&&!(n.length<2))return a[1].trim()}return""}function qtranxj_ce(e,n,t,a){var i=document.createElement(e);if(n)for(prop in n)i[prop]=n[prop];return t&&(a&&t.firstChild?t.insertBefore(i,t.firstChild):t.appendChild(i)),i}qtranxj_get_split_blocks=function(e){return e.xsplit(/(<!--:[a-z]{2}-->|<!--:-->|\[:[a-z]{2}\]|\[:\]|\{:[a-z]{2}\}|\{:\})/gi)},qtranxj_split=function(e){var n=qtranxj_get_split_blocks(e);return qtranxj_split_blocks(n)},qtranxj_split_blocks=function(e){var n=new Object;for(var t in qTranslateConfig.language_config)n[t]="";if(!e||!e.length)return n;if(1==e.length){var a=e[0];for(var t in qTranslateConfig.language_config)n[t]+=a;return n}for(var i,r=/<!--:([a-z]{2})-->/gi,s=/\[:([a-z]{2})\]/gi,o=/\{:([a-z]{2})\}/gi,l=(t=!1,0);l<e.length;++l){if((a=e[l]).length)if(i=r.exec(a),r.lastIndex=0,null==i)if(i=s.exec(a),s.lastIndex=0,null==i)if(i=o.exec(a),o.lastIndex=0,null==i)if("\x3c!--:--\x3e"!=a&&"[:]"!=a&&"{:}"!=a)if(t)n[t]?n[t]+=a:n[t]=a,t=!1;else for(var c in n)n[c]+=a;else t=!1;else t=i[1];else t=i[1];else t=i[1]}return n},String.prototype.xsplit=function(e){if(3==="a~b".split(/(~)/).length)return this.split(e);e.global||(e=new RegExp(e.source,"g"+(e.ignoreCase?"i":"")));for(var n,t=0,a=[];null!=(n=e.exec(this));)a.push(this.slice(t,n.index)),1<n.length&&a.push(n[1]),t=e.lastIndex;return t<this.length&&a.push(this.slice(t)),t==this.length&&a.push(""),a};var qTranslateX=function(e){var h=this;(qTranslateConfig.qtx=this).getLanguages=function(){return qTranslateConfig.language_config},this.getFlagLocation=function(){return qTranslateConfig.flag_location},this.isLanguageEnabled=function(e){return!!qTranslateConfig.language_config[e]};var g=function(e){document.cookie="qtrans_edit_language="+e};qTranslateConfig.LSB?(qTranslateConfig.activeLanguage=qtranxj_get_cookie("qtrans_edit_language"),qTranslateConfig.activeLanguage&&this.isLanguageEnabled(qTranslateConfig.activeLanguage)||(qTranslateConfig.activeLanguage=qTranslateConfig.language,this.isLanguageEnabled(qTranslateConfig.activeLanguage)?g(qTranslateConfig.activeLanguage):qTranslateConfig.LSB=!1)):(qTranslateConfig.activeLanguage=qTranslateConfig.language,g(qTranslateConfig.activeLanguage)),this.getActiveLanguage=function(){return qTranslateConfig.activeLanguage};var C={};this.hasContentHook=function(e){return C[e]},this.addContentHook=function(e,n,t){if(!e)return!1;switch(e.tagName){case"TEXTAREA":break;case"INPUT":switch(e.type){case"button":case"checkbox":case"password":case"radio":case"submit":return!1}break;default:return!1}if(!t){if(!e.name)return!1;t=e.name}if(e.id){if(C[e.id]){if(jQuery.contains(document,e))return C[e.id];h.removeContentHook(e)}}else if(C[t])for(var a=0;++a,e.id=t+a,C[e.id];);else e.id=t;e.className+=" qtranxs-translatable";var i,r=C[e.id]={};if(r.name=t,r.contentField=e,r.lang=qTranslateConfig.activeLanguage,n)switch(n){case"slug":i="qtranslate-slugs[";break;case"term":i="qtranslate-terms[";break;default:i="qtranslate-fields["}else n="[",i="qtranslate-fields[";r.encode=n;var s,o,l,c=r.name.indexOf("[");if(c<0)s=i+r.name+"]";else if(s=i+r.name.substring(0,c)+"]",r.name.lastIndexOf("[]")<0)s+=r.name.substring(c);else{var g=r.name.length-2;c<g&&(s+=r.name.substring(c,g)),o="[]"}if(r.fields={},!qTranslateConfig.RAW)for(var f in l=qtranxj_split(e.value),e.value=l[r.lang],l){var u=s+"["+f+"]";o&&(u+=o);var d=qtranxj_ce("input",{name:u,type:"hidden",className:"hidden",value:l[f]});r.fields[f]=d,e.parentNode.insertBefore(d,e)}switch(n){case"slug":case"term":qTranslateConfig.RAW&&(l=qtranxj_split(e.value)),r.sepfield=qtranxj_ce("input",{name:s+"[qtranslate-original-value]",type:"hidden",className:"hidden",value:l[qTranslateConfig.default_language]});break;default:qTranslateConfig.RAW||(r.sepfield=qtranxj_ce("input",{name:s+"[qtranslate-separator]",type:"hidden",className:"hidden",value:n}))}return r.sepfield&&e.parentNode.insertBefore(r.sepfield,e),r},this.addContentHookC=function(e){return h.addContentHook(e,"[")},this.addContentHookB=function(e){return h.addContentHook(e,"[")},this.addContentHookById=function(e,n,t){return h.addContentHook(document.getElementById(e),n,t)},this.addContentHookByIdName=function(e){var n;switch(e[0]){case"<":case"[":n=e.substring(0,1),e=e.substring(1)}return h.addContentHookById(e,n)},this.addContentHookByIdC=function(e){return h.addContentHookById(e,"[")},this.addContentHookByIdB=function(e){return h.addContentHookById(e,"[")},this.addContentHooks=function(e,n,t){for(var a=0;a<e.length;++a){var i=e[a];h.addContentHook(i,n,t)}};this.addContentHooksByClass=function(e,n){var t;0!=e.indexOf("<")&&0!=e.indexOf("[")||(t=e.substring(0,1),e=e.substring(1)),function(e,n,t){n||(n=document);var a=n.getElementsByClassName(e);h.addContentHooks(a,t)}(e,n,t)},this.addContentHooksByTagInClass=function(e,n,t){for(var a=t.getElementsByClassName(e),i=0;i<a.length;++i){var r=a[i].getElementsByTagName(n);h.addContentHooks(r)}};var t=function(e){if(!e)return!1;e.sepfield&&jQuery(e.sepfield).remove();var n={};for(var t in e.fields){var a=e.fields[t];n[t]=a.value,jQuery(a).remove()}return jQuery(e.contentField).removeClass("qtranxs-translatable"),delete C[e.contentField.id],n};this.removeContentHook=function(e){if(!e)return!1;if(!e.id)return!1;if(!C[e.id])return!1;var n=C[e.id];return t(n),jQuery(e).removeClass("qtranxs-translatable"),!0},this.refreshContentHook=function(e){if(!e)return!1;if(!e.id)return!1;var n=C[e.id];return n&&t(n),h.addContentHook(e)};var a=function(e){if(e[qTranslateConfig.language])return"("+qTranslateConfig.language+") "+e[qTranslateConfig.language];if(e[qTranslateConfig.default_language])return"("+qTranslateConfig.default_language+") "+e[qTranslateConfig.default_language];for(var n in e)if(e[n])return"("+n+") "+e[n];return""},r=function(e){var n=null;for(var t in e)e[t]||(n||(n=a(e)),e[t]=n)},f=[],i=function(e){if(!e.nodeValue)return 0;var n=qtranxj_get_split_blocks(e.nodeValue);if(!n||!n.length||1==n.length)return 0;var t={};return t.nd=e,t.contents=qtranxj_split_blocks(n),r(t.contents),e.nodeValue=t.contents[qTranslateConfig.activeLanguage],f.push(t),1},u=[],s=function(e,n){if(!e.hasAttribute(n))return 0;var t=e.getAttribute(n),a=qtranxj_get_split_blocks(t);if(!a||!a.length||1==a.length)return 0;var i={};return i.nd=e,i.attr=n,i.contents=qtranxj_split_blocks(a),r(i.contents),e.setAttribute(n,i.contents[qTranslateConfig.activeLanguage]),u.push(i),1};this.addDisplayHook=function(e){if(!e||!e.tagName)return 0;switch(e.tagName){case"TEXTAREA":return 0;case"INPUT":switch(e.type){case"submit":if(e.value)return s(e,"value");default:return 0}}var n=0;if(e.childNodes&&e.childNodes.length)for(var t=0;t<e.childNodes.length;++t){var a=e.childNodes[t];switch(a.nodeType){case 1:n+=h.addDisplayHook(a);break;case 2:case 3:n+=i(a)}}return n},this.addDisplayHookById=function(e){return h.addDisplayHook(document.getElementById(e))};var d=function(e){text=e.contentField.value,e.wpautop&&window.switchEditors&&(text=window.switchEditors.wpautop(text)),e.mce.setContent(text,{format:"html"})};this.addDisplayHooks=function(e){for(var n=0;n<e.length;++n){var t=e[n];h.addDisplayHook(t)}},this.addDisplayHookAttrs=function(e,n){for(var t=0;t<n.length;++t){var a=n[t];s(e,a)}},this.addDisplayHooksAttrs=function(e,n){for(var t=0;t<e.length;++t){var a=e[t];h.addDisplayHookAttrs(a,n)}},this.addDisplayHooksByClass=function(e,n){var t=n.getElementsByClassName(e);h.addDisplayHooks(t)},this.addDisplayHooksByTagInClass=function(e,n,t){for(var a=t.getElementsByClassName(e),i=0;i<a.length;++i){var r=a[i].getElementsByTagName(n);h.addDisplayHooks(r)}},this.addCustomContentHooks=function(){for(var e=0;e<qTranslateConfig.custom_fields.length;++e){var n=qTranslateConfig.custom_fields[e];h.addContentHookByIdName(n)}for(e=0;e<qTranslateConfig.custom_field_classes.length;++e){n=qTranslateConfig.custom_field_classes[e];h.addContentHooksByClass(n)}qTranslateConfig.LSB&&setTinyMceInit()};this.addContentHooksTinyMCE=function(){function a(e){var n=e.id;if(n){var t=C[n];if(t&&!t.mce){(t.mce=e).getContainer().className+=" qtranxs-translatable",e.getElement().className+=" qtranxs-translatable";var a=t.updateTinyMCEonInit;if(null==a)a=e.getContent({format:"html"}).replace(/\s+/g,"")!=t.contentField.value.replace(/\s+/g,"");return a&&d(t),t}}}setTinyMceInit=function(){if(window.tinyMCE)for(var e in C){var n=C[e];if("TEXTAREA"===n.contentField.tagName&&(!n.mce&&!n.mceInit&&tinyMCEPreInit.mceInit[e])){if(n.mceInit=tinyMCEPreInit.mceInit[e],n.mceInit.wpautop){n.wpautop=n.mceInit.wpautop;var t=tinymce.DOM.select("#wp-"+e+"-wrap");t&&t.length&&(n.wrapper=t[0],n.wrapper&&(tinymce.DOM.hasClass(n.wrapper,"tmce-active")&&(n.updateTinyMCEonInit=!0),tinymce.DOM.hasClass(n.wrapper,"html-active")&&(n.updateTinyMCEonInit=!1)))}else n.updateTinyMCEonInit=!1;tinyMCEPreInit.mceInit[e].init_instance_callback=function(e){a(e)}}}},setTinyMceInit(),loadTinyMceHooks=function(){if(window.tinyMCE&&tinyMCE.editors)for(var e=0;e<tinyMCE.editors.length;++e){a(tinyMCE.editors[e])}},window.addEventListener("load",loadTinyMceHooks)},qTranslateConfig.onTabSwitchFunctions||(qTranslateConfig.onTabSwitchFunctions=[]),qTranslateConfig.onTabSwitchFunctionsSave||(qTranslateConfig.onTabSwitchFunctionsSave=[]),qTranslateConfig.onTabSwitchFunctionsLoad||(qTranslateConfig.onTabSwitchFunctionsLoad=[]),this.addLanguageSwitchListener=function(e){qTranslateConfig.onTabSwitchFunctions.push(e)},this.addLanguageSwitchBeforeListener=function(e){qTranslateConfig.onTabSwitchFunctionsSave.push(e)},this.delLanguageSwitchBeforeListener=function(e){for(var n=0;n<qTranslateConfig.onTabSwitchFunctionsSave.length;++n){if(qTranslateConfig.onTabSwitchFunctionsSave[n]==e)return void qTranslateConfig.onTabSwitchFunctionsSave.splice(n,1)}},this.addLanguageSwitchAfterListener=function(e){qTranslateConfig.onTabSwitchFunctionsLoad.push(e)},this.delLanguageSwitchAfterListener=function(e){for(var n=0;n<qTranslateConfig.onTabSwitchFunctionsLoad.length;++n){if(qTranslateConfig.onTabSwitchFunctionsLoad[n]==e)return void qTranslateConfig.onTabSwitchFunctionsLoad.splice(n,1)}},this.enableLanguageSwitchingButtons=function(e){var n=e?"block":"none";for(var t in qTranslateConfig.tabSwitches){for(var a=qTranslateConfig.tabSwitches[t],i=0;i<a.length;++i){a[i];a[i].parentElement.style.display=n;break}break}};var n,v=function(){for(var e=document.getElementsByClassName("wrap"),n=0;n<e.length;++n){if((t=e[n].getElementsByTagName("form")).length)return t[0]}var t;if(1===(t=document.getElementsByTagName("form")).length)return t[0];for(n=0;n<t.length;++n){var a=t[n];if((e=a.getElementsByClassName("wrap")).length)return a}return null};if("function"==typeof e.addContentHooks&&e.addContentHooks(this),qTranslateConfig.page_config&&qTranslateConfig.page_config.forms&&function(e){for(var n in e){var t,a=e[n];if(a.form){if(a.form.id)t=document.getElementById(a.form.id);else if(a.form.jquery)t=$(a.form.jquery);else if(a.form.name){var i=document.getElementsByName(a.form.name);i&&i.length&&(t=i[0])}}else t=document.getElementById(n);for(var r in t||(t=v())||(t=document),a.fields){var s=a.fields[r],o=[];s.container_id?(g=document.getElementById(s.container_id))&&o.push(g):s.container_jquery?o=$(s.container_jquery):s.container_class?o=document.getElementsByClassName(s.container_class):o.push(t);var l=s.encode;switch(l){case"none":continue;case"display":if(s.jquery)for(var c=0;c<o.length;++c){var g=o[c],f=jQuery(g).find(s.jquery);s.attrs?h.addDisplayHooksAttrs(f,s.attrs):h.addDisplayHooks(f)}else{var u=s.id?s.id:r,d=document.getElementById(u);s.attrs?h.addDisplayHookAttrs(d,s.attrs):h.addDisplayHook(d)}break;case"[":case"<":case"{":case"byline":default:if(s.jquery)for(c=0;c<o.length;++c)g=o[c],f=jQuery(g).find(s.jquery),h.addContentHooks(f,l,s.name);else u=s.id?s.id:r,h.addContentHookById(u,l,s.name)}}}}(qTranslateConfig.page_config.forms),(n=jQuery)(".i18n-multilingual").each(function(e,n){h.addContentHook(n,"[")}),n(".i18n-multilingual-curly").each(function(e,n){h.addContentHook(n,"{")}),n(".i18n-multilingual-term").each(function(e,n){h.addContentHook(n,"term")}),n(".i18n-multilingual-slug").each(function(e,n){h.addContentHook(n,"slug")}),n(".i18n-multilingual-display").each(function(e,n){h.addDisplayHook(n)}),!f.length&&!u.length){var o=!1;for(var l in C){o=!0;break}if(!o)return}this.onLoadLanguage=function(e,n){for(var t=qTranslateConfig.onTabSwitchFunctionsLoad,a=0;a<t.length;++a)t[a].call(qTranslateConfig.qtx,e,n)},this.switchActiveLanguage=function(e){if(qTranslateConfig.activeLanguage!==e){if(qTranslateConfig.activeLanguage){for(var n=!0,t=qTranslateConfig.onTabSwitchFunctionsSave,a=0;a<t.length;++a){!1===t[a].call(qTranslateConfig.qtx,qTranslateConfig.activeLanguage,e)&&(n=!1)}if(!n)return;var i=qTranslateConfig.tabSwitches[qTranslateConfig.activeLanguage];for(a=0;a<i.length;++a)i[a].classList.remove(qTranslateConfig.lsb_style_active_class),jQuery(i[a]).find(".button").removeClass("active")}var r=qTranslateConfig.activeLanguage;qTranslateConfig.activeLanguage=e;for(i=qTranslateConfig.tabSwitches[qTranslateConfig.activeLanguage],a=0;a<i.length;++a)i[a].classList.add(qTranslateConfig.lsb_style_active_class),jQuery(i[a]).find(".button").addClass("active");var s=qTranslateConfig.onTabSwitchFunctions;for(a=0;a<s.length;++a)s[a].call(qTranslateConfig.qtx,e,r);h.onLoadLanguage(e,r)}},this.clickSwitchLanguage=function(){var e=jQuery(this).hasClass("button")?this.parentNode:this,n=e.lang;n?(jQuery(".qtranxs-lang-switch-wrap").hasClass("copying")?(h.copyContentFrom(n),jQuery(e).find(".button").blur()):h.switchActiveLanguage(n),jQuery(".qtranxs-lang-switch-wrap").removeClass("copying"),jQuery(".qtranxs-lang-copy .button").removeClass("active")):alert("qTranslate-X: This should not have happened: Please, report this incident to the developers: !lang")},this.toggleCopyFrom=function(){jQuery(".qtranxs-lang-switch-wrap").toggleClass("copying"),jQuery(".qtranxs-lang-copy .button").toggleClass("active"),jQuery(".qtranxs-lang-switch-wrap").hasClass("copying")?jQuery(".qtranxs-lang-switch").each(function(){jQuery(this).attr("orig-title",jQuery(this).attr("title")),jQuery(this).attr("lang")==qTranslateConfig.activeLanguage?jQuery(this).attr("title",qTranslateConfig.strings.CopyFromAlt):jQuery(this).attr("title",qTranslateConfig.strings.CopyFrom+" [:"+jQuery(this).attr("lang")+"]")}):jQuery(".qtranxs-lang-switch").each(function(){jQuery(this).attr("title",jQuery(this).attr("orig-title"))})},this.copyContentFrom=function(e){var n=qTranslateConfig.activeLanguage,t=!1;for(var a in C){var i=C[a],r=i.mce&&!i.mce.hidden,s=r?i.mce.getContent({format:"html"}):i.contentField.value;s||(s=i.fields[e].value)&&(i.contentField.value=s,r&&d(i),t=!0)}t&&h.onLoadLanguage(n,e)},this.createSetOfLSBwith=function(e){var n=qtranxj_ce("ul",{className:"qtranxs-lang-switch-wrap "+e}),t=qTranslateConfig.language_config;for(var a in qTranslateConfig.tabSwitches||(qTranslateConfig.tabSwitches={}),t){var i=t[a],r=qTranslateConfig.flag_location,s=qtranxj_ce("li",{lang:a,className:"qtranxs-lang-switch qtranxs-lang-switch-"+a,title:qTranslateConfig.strings.ShowIn+i.admin_name+" [:"+a+"]",onclick:h.clickSwitchLanguage},n),o=s;"button"==qTranslateConfig.lsb_style_subitem&&(o=qtranxj_ce("button",{className:"button button-secondary",type:"button"},s)),qtranxj_ce("img",{src:r+i.flag},o),qtranxj_ce("span",{innerHTML:i.name},o),qTranslateConfig.activeLanguage==a&&(s.classList.add(qTranslateConfig.lsb_style_active_class),jQuery(s).find(".button").addClass("active")),qTranslateConfig.tabSwitches[a]||(qTranslateConfig.tabSwitches[a]=[]),qTranslateConfig.tabSwitches[a].push(s)}if(!qTranslateConfig.hide_lsb_copy_content){var l=qtranxj_ce("li",{className:"qtranxs-lang-copy"},n),c=qtranxj_ce("button",{className:"button button-secondary",type:"button",title:qTranslateConfig.strings.CopyFromAlt,onclick:h.toggleCopyFrom},l);qtranxj_ce("span",{innerHTML:qTranslateConfig.strings.CopyFrom},c)}return n},this.createSetOfLSB=function(){return h.createSetOfLSBwith(qTranslateConfig.lsb_style_wrap_class+" widefat")};if(qTranslateConfig.LSB){this.addContentHooksTinyMCE(),function(e){var n=document.getElementById("qtranxs-meta-box-lsb");if(n){var t=n.getElementsByClassName("inside");if(t.length){n.className+=" closed",e(n).find(".hndle").remove();var a=document.createElement("span");n.insertBefore(a,t[0]),a.className="hndle ui-sortable-handle";var i=h.createSetOfLSBwith(qTranslateConfig.lsb_style_wrap_class);a.appendChild(i),e(function(e){e("#qtranxs-meta-box-lsb .hndle").unbind("click.postboxes")})}}}(jQuery);var c=[];if(qTranslateConfig.page_config&&qTranslateConfig.page_config.anchors)for(var m in qTranslateConfig.page_config.anchors){var q=qTranslateConfig.page_config.anchors[m];if(T=document.getElementById(m))c.push({f:T,where:q.where});else if(q.jquery)for(var p=jQuery(q.jquery),y=0;y<p.length;++y){var T=p[y];c.push({f:T,where:q.where})}}if(!c.length)(T=e.langSwitchWrapAnchor)||(T=v()),T&&c.push({f:T,where:"before"});for(y=0;y<c.length;++y){if(!(q=c[y]).where||0<=q.where.indexOf("before")){var b=h.createSetOfLSB();q.f.parentNode.insertBefore(b,q.f)}if(q.where&&0<=q.where.indexOf("after")){b=h.createSetOfLSB();q.f.parentNode.insertBefore(b,q.f.nextSibling)}if(q.where&&0<=q.where.indexOf("first")){b=h.createSetOfLSB();q.f.insertBefore(b,q.f.firstChild)}if(q.where&&0<=q.where.indexOf("last")){b=h.createSetOfLSB();q.f.insertBefore(b,null)}}this.addLanguageSwitchListener(function(e){g(e);for(var n=f.length;0<=--n;)(a=f[n]).nd.parentNode?a.nd.nodeValue=a.contents[e]:f.splice(n,1);for(n=u.length;0<=--n;)(a=u[n]).nd.parentNode?a.nd.setAttribute(a.attr,a.contents[e]):u.splice(n,1);if(!qTranslateConfig.RAW)for(var t in C){var a,i=(a=C[t]).mce&&!a.mce.hidden;i&&a.mce.save({format:"html"});var r=a.contentField.value.trim(),s=qtranxj_get_split_blocks(r);if(!s||s.length<=1){a.fields[a.lang].value=r,a.lang=e;var o=a.fields[a.lang].value;a.contentField.placeholder&&""!=o&&(a.contentField.placeholder=""),a.contentField.value=o,i&&d(a)}else{var l=qtranxj_split_blocks(s);for(var c in a.fields)a.fields[c].value=l[c];a.lang=e}}}),e.onTabSwitch&&this.addLanguageSwitchListener(e.onTabSwitch)}};qTranslateConfig.js.get_qtx=function(){return qTranslateConfig.qtx||new qTranslateX(qTranslateConfig.js),qTranslateConfig.qtx},jQuery(document).ready(qTranslateConfig.js.get_qtx);